<!DOCTYPE html>
<html>
<head>
  <title>Interactive Event Calendar</title>
  <link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css
">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
<link rel="stylesheet" href="/room-management-system-user/css/daskbord.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css" />

  
</head>
<body>
    <!-- =----------------------header---------------- -->
    <div class="page-header">
      
      <div class="logo">
        <img src="/room-management-system-user/images/image (1).jpg" class="logoImg">
        <div style="margin-left: 80px; margin-top:10px;" class="headerLinks">
            <a style="text-decoration: none;margin-left: 20px; color: #fff; font-size: 1.7em;" href="#" class="active"><i class="fa-solid fa-house"></i></a>
            <a style=" text-decoration: none;margin-left: 20px; color: #fff; font-size: 1.7em;" href="/room-management-system-user/html/team.html" class="active"><i class="fa-solid fa-address-book"></i>            </a>
            <a style=" text-decoration: none;margin-left: 20px; color: #fff; font-size: 1.7em;" id="mcndr" href="/room-management-system-user/html/slotBooking.html" ><i class="fa fa-calendar" ></i>            </a>
        </div>      
      </div>
      
        <div class="header-right">
          <button class="btn" id="profilecard"><svg xmlns="http://www.w3.org/2000/svg" color="white" width="35" height="35" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
          <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
          <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
        </svg></button>

        <div class="profilepopupcard" id="profilecard">
          <div style="padding-left: 55px;margin-bottom: 10px;">
            <svg xmlns="http://www.w3.org/2000/svg"  color="black" width="50" height="50" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
              <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
              <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
            </svg>
          </div>
          <h6 id="editprofile" style="cursor:pointer;">Edit profile</h6>
          <button style="border: 0; background-color: transparent; padding: 0;" onclick="logout()"><a href="/room-management-system-user/html/Index.html" style="text-decoration: none;"><h6>Log out</h6> </a></button>
        </div>
        <!-- edit profile -->
        <div class="profile-card" style="position: absolute;">
          <i class="fa-solid fa-x" style="position: absolute; top: 15px; left: 90%;" id="closeditprofile"></i>

          <div class="profile-header">
            <img src="/room-management-system-user/images/image (1).jpg" alt="Profile Picture" > 
            <h2 id="name">Aman Patel</h2>
            <p id="title">Web Developer</p>
          </div>
          <div class="profile-details">
            <ul>
              <li><strong>Email:</strong> <span id="email">aman@example.com</span></li>
              <li><strong>Location:</strong> <span id="location">Indore, India</span></li>
              <li><strong>Skills:</strong> <span id="skills">HTML, CSS, JavaScript</span></li>
            </ul>
          </div>
          <div class="profile-footer">
            <a href="#" id="edit-btn" class="profile-button">Edit Profile</a>
            <div class="edit-form hidden" id="edit-form">
              <input class="profile-input" type="text" id="edit-name" placeholder="Name">
              <input class="profile-input" type="text" id="edit-title" placeholder="Title">
              <input class="profile-input" type="text" id="edit-email" placeholder="Email">
              <input class="profile-input" type="text" id="edit-location" placeholder="Location">
              <input class="profile-input" type="text" id="edit-skills" placeholder="Skills">
              <button class="profile-button" id="save-btn">Save</button>
              <button class="profile-button" id="cancel-btn">Cancel</button>
            </div>
          </div>
        </div>
      </div>
    </div>

<div >
  <div class="calendarside" style="display: flex;position: relative;">
    <div class="sidebar">
      <button style="margin: 20px 0 5px 100px;" onclick="mdisplayProfile()" ondblclick="mhideProfile()">Create Meeting</button>

      <div id="meetingcard">
        <div style="position: relative;">
          <h3>Add Appoinment</h3>
          <i class="fa-solid fa-x" style="position: absolute; top: 0px; left: 100% ;" id="closemeeting"></i>
        <form id="appoinment-form" action="#">
          <div class="mform-group">
            <label class="mlabel" for="title-form">Title</label>
            <input class="minput" type="text" id="mtitle-form" placeholder="Enter your title" required>
          </div>
          <div class="mform-group">
            <label class="mlabel" for="startDate-form">Date</label>
            <input class="minput" type="date" id="mstartDate-form" placeholder="Enter start time" required>
          </div>
          <div class="mappointment-time">
            <div class="mform-group">
              <label class="mlabel" for="starton-form">Start time</label>
              <input class="minput" type="time" id="mstarton-form" placeholder="Enter start time" required>
            </div>
            <div class="mform-group">
              <label class="mlabel" for="endson-form">End time</label>
              <input class="minput" type="time" id="mendson-form" placeholder="Enter end time" required>
            </div>
          </div>
          <div class="mform-group">
            <label class="mlabel" for="discription-form">Discription</label>
            <!-- <input class="minput" type="textfield" id="discription-form" placeholder="Enter text here..."> -->
            <textarea name="discription-form" id="mdiscription-form" cols="20" rows="4"
              placeholder="Enter text here..."></textarea>
          </div>
          <div class="mform-group">
            <label class="mlabel" for="participant-form">Add Participants</label>
            <input class="minput" type="text" id="mparticipant-form" placeholder="Enter name">
          <p style="position:absolute; top:30px; left:92%;padding: 0;" class="mmlistpopoup"><i class="fa-solid fa-address-book"></i></p>
          </div>
          <div class="mbuttonf">
            <button class="mbutton" type="submit">Create</button>
            <!-- <button class="mbutton" type="submit">Discard</button> -->
          </div>
        </form>
      </div>
        <!-- Participant card -->
        <div class="mmcard">
          <i class="fa-solid fa-x" style="position: absolute; top: 15px; left: 90% ;" id="closepaticipant"></i>
          <h1 id="pageHeading">Participants List</h1>
          <div class="search-bar">
            <input type="text" id="searchInput" class="search-input" placeholder="Search participants" />
          </div>
          <ul id="participantList" class="participant-list">
          </ul>
          <button class="mmbutton" type="submit">Select</button>
          <div id="overlay" class="overlay"></div>
        </div>
      </div>

      <div class="wrapper" id="body">
        <header>
          <p class="current-date"></p>
          <div class="icons">
            <span id="prev" class="material-symbols-rounded"><</span>
            <span id="next" class="material-symbols-rounded">></span>
          </div>
        </header>
        <div class="calendar">
          <ul class="weeks">
            <li>Sun</li>
            <li>Mon</li>
            <li>Tue</li>
            <li>Wed</li>
            <li>Thu</li>
            <li>Fri</li>
            <li>Sat</li>
          </ul>
          <ul class="days"></ul>
        </div>
        
      </div>
    </div>
    <div id="calendar" style="z-index: 1; padding-top: 15px; width: 980px;height: 100vh;margin: 1em;"></div>
  </div>


</div>

  
<footer>
  <div class="company">
    <img src="/room-management-system-user/images/image (1).jpg" alt="" style="margin: 10px;">
    <p style="color:#fff;margin: 10px ;">36, Bicholi Hapsi Rd,<br> near Phoenix Hospital,<br> Shukh Shanti Nagar,<br> Indore, Madhya Pradesh <br>452001
    </p>
  </div>
  <div class="footerLinks">
      <h3 style="color: #fff ;margin-left: px;">links</h3>
      <ul class="footerLinkList">
        <li  style="list-style: none; "><a href="/" style="color: #fff; text-decoration: none; text-transform: capitalize;">home</a></li>
        <li  style="list-style: none"><a href="/room-management-system-user/html/Index.html" style="color: #fff;text-decoration: none;">Login</a></li>
        <li  style="list-style: none;"><a href="/register.html" style="color: #fff;text-decoration: none;">Registration</a></li>
        <li  style="list-style: none;"><a href="/createMeeting.html" style="color: #fff;text-decoration: none;">Meeting</a></li>
      </ul>
  </div>
  <div style="margin-top: 35px;">
    <i style="color: #fff; font-size: 35px; margin: 10px;" class="bi bi-twitter"></i>
    <i style="color: #fff; font-size: 35px; margin: 10px;" class="bi bi-instagram"></i>
    <i style="color: #fff; font-size: 35px; margin: 10px;" class="bi bi-linkedin"></i>
  </div>
</footer>







  <script>
    document.addEventListener('DOMContentLoaded', function() {
    var calendar = $('#calendar').fullCalendar({
    header: {
      left: 'prev,next today',
      center: 'title',
      right: 'month,agendaWeek,agendaDay'
    },
    editable: true,
    events: [
      {
        title: 'sourabh sharma',
        start: '2023-06-14',
        TimeRanges:'50'
      },
      {
        title: 'aman patel',
        start: '2023-06-15',
        TimeRanges:'50'
      },{
        title: 'vailbhav',
        start: '2023-06-17',
        TimeRanges:'50'
      },{
        title: 'rajat',
        start: '2023-06-16',
        TimeRanges:'50'
      },{
        title: 'rajendra',
        start: '2023-06-15',
        TimeRanges:'50'
      }
      // Add more events here...
    ],
    eventClick: function(event) {
      // Handle event click here
      alert('Clicked on: ' + event.title);
    },
    eventDrop: function(event, delta, revertFunc) {
      // Handle event drag and drop here
      if (!confirm("Are you sure about this change?")) {
        revertFunc();
      }
    },
    eventResize: function(event, delta, revertFunc) {
      // Handle event resize here
      if (!confirm("Are you sure about this change?")) {
        revertFunc();
      }
    }
  });
});

  </script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@3.10.2/dist/fullcalendar.min.js"></script>
    <script src="/room-management-system-user/javascript/daskbord.js">
    </script>
    <script>
      // function displayProfile(){
      //   const card=document.getElementById('profilecard');
      //   card.style.display="block";
      // }
      // function hideProfile(){
      //   const card=document.getElementById('profilecard');
      //   card.style.display="none ";
      // }
      function logout(){
        window.location.replace("daskbord.html");
      }

      function mdisplayProfile(){
        const card=document.getElementById('meetingcard');
        card.style.display="block";
      }
      $('#mcndr').click(()=>{
        $('#meetingcard').show();
        
      });
      $('#closemeeting').click(()=>{
        $('#meetingcard').hide();
        
      });
      $('#closepaticipant').click(()=>{
        $('.mmcard').hide();
        
      });
      
      $("#profilecard").click(()=>{
        $(".profilepopupcard").toggle();
      });
      $(".mmlistpopoup").click(()=>{
        $(".mmcard").toggle();
      });
      $('#editprofile').click(()=>{
        $('.profile-card').show();
        
      });
      $('#closeditprofile').click(()=>{
        $('.profile-card').hide();
        
      });
      // window.addEventListener("click", ()=> {
      //         document.getElementsByClassName("mmcard").style.display ='none';
      //       });
    </script>
<script>
      // JavaScript code for the participants list page
      const participantList = document.getElementById('participantList');
      const searchInput = document.getElementById('searchInput');
      const popup = document.getElementById('popup');
      const overlay = document.getElementById('overlay');
      let participants = [
        {
          name: "Aman Patel",
        },
        {
          name: "Sourabh",
        },
        {
          name: "Rajat",
        },
        {
          name: "Sumit",
        },
        
      ];
  
      // Display participants
      function displayParticipants(participants) {
        participantList.innerHTML = '';
        participants.forEach(participant => {
          const participantCard = document.createElement('li');
          participantCard.className = 'participant-card';
          participantCard.innerHTML = `
            <input type="checkbox" class="checkbox">
            <span class="participant-name">${participant.name}</span>
          `;
          participantCard.addEventListener('click', () => showPopup(participant));
          participantList.appendChild(participantCard);
        });
      }
  
      // Show pop-up with participant details
      function showPopup(participant) {
        document.getElementById('participantName').textContent = participant.name;
        popup.style.display = 'block';
        overlay.style.display = 'block';
      }
  
      // Close pop-up
      function closePopup() {
        popup.style.display = 'none';
        overlay.style.display = 'none';
      }
  
      // Search participants
      function searchParticipants() {
        const searchText = searchInput.value.trim();
        const filteredParticipants = participants.filter(participant =>
          participant.name.toLowerCase().includes(searchText) ||
          participant.email.toLowerCase().includes(searchText)
        );
        displayParticipants(filteredParticipants);
      }
  
      // Event listener for search input
      searchInput.addEventListener('input', searchParticipants);
  
      // Initial display of participants
      displayParticipants(participants);
  
      // Retrieve the selected participants from local storage or initialize an empty array
  let selectedParticipants = JSON.parse(localStorage.getItem('selectedParticipants')) || [];
  
  // Function to handle the select button click
  function handleSelectButton() {
    // Get the checkboxes for all participants
    const checkboxes = document.getElementsByClassName('mmcheckbox').value;
  
    // Loop through the checkboxes and add the selected participants to the array
    for (let i = 0; i < checkboxes.length; i++) {
      if (checkboxes[i].checked) {
        const participant_name = checkboxes[i].nextSibling.textContent;
        console.log(participant_name);
        selectedParticipants.push(participant_name);
      }
    }
  
    // Store the updated selected participants array in local storage
    localStorage.setItem('selectedParticipants', JSON.stringify(selectedParticipants));
  
    // Redirect the user to the second page or perform any other desired action
    window.location.replace('/room-management-system-user/html/daskbord.html');
  }
  
  // Event listener for the select button
  const selectButton = document.querySelector('.mmbutton[type="submit"]');
  selectButton.addEventListener('click', handleSelectButton);
  
    </script>
  <script >document.addEventListener('DOMContentLoaded', function() {
    var editBtn = document.getElementById('edit-btn');
    var saveBtn = document.getElementById('save-btn');
    var cancelBtn = document.getElementById('cancel-btn');
    var profileName = document.getElementById('name');
    var profileTitle = document.getElementById('title');
    var profileEmail = document.getElementById('email');
    var profileLocation = document.getElementById('location');
    var profileSkills = document.getElementById('skills');
    var editForm = document.getElementById('edit-form');
    var editName = document.getElementById('edit-name');
    var editTitle = document.getElementById('edit-title');
    var editEmail = document.getElementById('edit-email');
    var editLocation = document.getElementById('edit-location');
    var editSkills = document.getElementById('edit-skills');
    
    // Enable Edit Profile functionality
    editBtn.addEventListener('click', function() {
      profileName.style.display = 'none';
      profileTitle.style.display = 'none';
      profileEmail.style.display = 'none';
      profileLocation.style.display = 'none';
      profileSkills.style.display = 'none';
      editForm.classList.remove('hidden');
      editBtn.style.display = 'none';
      editName.value = profileName.innerText;
      editTitle.value = profileTitle.innerText;
      editEmail.value = profileEmail.innerText;
      editLocation.value = profileLocation.innerText;
      editSkills.value = profileSkills.innerText;
    });
    
    // Save edited profile
    saveBtn.addEventListener('click', function() {
      profileName.innerText = editName.value;
      profileTitle.innerText = editTitle.value;
      profileEmail.innerText = editEmail.value;
      profileLocation.innerText = editLocation.value;
      profileSkills.innerText = editSkills.value;
      profileName.style.display = 'block';
      profileTitle.style.display = 'block';
      profileEmail.style.display = 'block';
      profileLocation.style.display = 'block';
      profileSkills.style.display = 'block';
      editForm.classList.add('hidden');
      editBtn.style.display = 'inline';
    });
    
    // Cancel editing profile
    cancelBtn.addEventListener('click', function() {
      profileName.style.display = 'block';
      profileTitle.style.display = 'block';
      profileEmail.style.display = 'block';
      profileLocation.style.display = 'block';
      profileSkills.style.display = 'block';
      editForm.classList.add('hidden');
      editBtn.style.display = 'inline';
    });
  });
  
</script>
</body>
<script>
    const calendar = document.querySelector(".calendar"),
  date = document.querySelector(".date"),
  daysContainer = document.querySelector(".days"),
  prev = document.querySelector(".prev"),
  next = document.querySelector(".next"),
  todayBtn = document.querySelector(".today-btn"),
  gotoBtn = document.querySelector(".goto-btn"),
  dateInput = document.querySelector(".date-input"),
  eventDay = document.querySelector(".event-day"),
  eventDate = document.querySelector(".event-date"),
  eventsContainer = document.querySelector(".events"),
  addEventBtn = document.querySelector(".add-event"),
  addEventWrapper = document.querySelector(".add-event-wrapper "),
  addEventCloseBtn = document.querySelector(".close "),
  addEventTitle = document.querySelector(".event-name "),
  addEventFrom = document.querySelector(".event-time-from "),
  addEventTo = document.querySelector(".event-time-to "),
  addEventSubmit = document.querySelector(".add-event-btn ");

let today = new Date();
let activeDay;
let month = today.getMonth();
let year = today.getFullYear();

const months = [
  "January",
  "February",
  "March",
  "April",
  "May",
  "June",
  "July",
  "August",
  "September",
  "October",
  "November",
  "December",
];

// const eventsArr = [
//   {
//     day: 13,
//     month: 11,
//     year: 2022,
//     events: [
//       {
//         title: "Event 1 lorem ipsun dolar sit genfa tersd dsad ",
//         time: "10:00 AM",
//       },
//       {
//         title: "Event 2",
//         time: "11:00 AM",
//       },
//     ],
//   },
// ];

const eventsArr = [];
getEvents();
console.log(eventsArr);

//function to add days in days with class day and prev-date next-date on previous month and next month days and active on today
function initCalendar() {
  const firstDay = new Date(year, month, 1);
  const lastDay = new Date(year, month + 1, 0);
  const prevLastDay = new Date(year, month, 0);
  const prevDays = prevLastDay.getDate();
  const lastDate = lastDay.getDate();
  const day = firstDay.getDay();
  const nextDays = 7 - lastDay.getDay() - 1;

  date.innerHTML = months[month] + " " + year;

  let days = "";

  for (let x = day; x > 0; x--) {
    days += `<div class="day prev-date">${prevDays - x + 1}</div>`;
  }

  for (let i = 1; i <= lastDate; i++) {
    //check if event is present on that day
    let event = false;
    eventsArr.forEach((eventObj) => {
      if (
        eventObj.day === i &&
        eventObj.month === month + 1 &&
        eventObj.year === year
      ) {
        event = true;
      }
    });
    if (
      i === new Date().getDate() &&
      year === new Date().getFullYear() &&
      month === new Date().getMonth()
    ) {
      activeDay = i;
      getActiveDay(i);
      updateEvents(i);
      if (event) {
        days += `<div class="day today active event">${i}</div>`;
      } else {
        days += `<div class="day today active">${i}</div>`;
      }
    } else {
      if (event) {
        days += `<div class="day event">${i}</div>`;
      } else {
        days += `<div class="day ">${i}</div>`;
      }
    }
  }

  for (let j = 1; j <= nextDays; j++) {
    days += `<div class="day next-date">${j}</div>`;
  }
  daysContainer.innerHTML = days;
  addListner();
}

//function to add month and year on prev and next button
function prevMonth() {
  month--;
  if (month < 0) {
    month = 11;
    year--;
  }
  initCalendar();
}

function nextMonth() {
  month++;
  if (month > 11) {
    month = 0;
    year++;
  }
  initCalendar();
}

prev.addEventListener("click", prevMonth);
next.addEventListener("click", nextMonth);

initCalendar();

//function to add active on day
function addListner() {
  const days = document.querySelectorAll(".day");
  days.forEach((day) => {
    day.addEventListener("click", (e) => {
      getActiveDay(e.target.innerHTML);
      updateEvents(Number(e.target.innerHTML));
      activeDay = Number(e.target.innerHTML);
      //remove active
      days.forEach((day) => {
        day.classList.remove("active");
      });
      //if clicked prev-date or next-date switch to that month
      if (e.target.classList.contains("prev-date")) {
        prevMonth();
        //add active to clicked day afte month is change
        setTimeout(() => {
          //add active where no prev-date or next-date
          const days = document.querySelectorAll(".day");
          days.forEach((day) => {
            if (
              !day.classList.contains("prev-date") &&
              day.innerHTML === e.target.innerHTML
            ) {
              day.classList.add("active");
            }
          });
        }, 100);
      } else if (e.target.classList.contains("next-date")) {
        nextMonth();
        //add active to clicked day afte month is changed
        setTimeout(() => {
          const days = document.querySelectorAll(".day");
          days.forEach((day) => {
            if (
              !day.classList.contains("next-date") &&
              day.innerHTML === e.target.innerHTML
            ) {
              day.classList.add("active");
            }
          });
        }, 100);
      } else {
        e.target.classList.add("active");
      }
    });
  });
}

todayBtn.addEventListener("click", () => {
  today = new Date();
  month = today.getMonth();
  year = today.getFullYear();
  initCalendar();
});

dateInput.addEventListener("input", (e) => {
  dateInput.value = dateInput.value.replace(/[^0-9/]/g, "");
  if (dateInput.value.length === 2) {
    dateInput.value += "/";
  }
  if (dateInput.value.length > 7) {
    dateInput.value = dateInput.value.slice(0, 7);
  }
  if (e.inputType === "deleteContentBackward") {
    if (dateInput.value.length === 3) {
      dateInput.value = dateInput.value.slice(0, 2);
    }
  }
});

gotoBtn.addEventListener("click", gotoDate);

function gotoDate() {
  console.log("here");
  const dateArr = dateInput.value.split("/");
  if (dateArr.length === 2) {
    if (dateArr[0] > 0 && dateArr[0] < 13 && dateArr[1].length === 4) {
      month = dateArr[0] - 1;
      year = dateArr[1];
      initCalendar();
      return;
    }
  }
  alert("Invalid Date");
}

//function get active day day name and date and update eventday eventdate
function getActiveDay(date) {
  const day = new Date(year, month, date);
  const dayName = day.toString().split(" ")[0];
  eventDay.innerHTML = dayName;
  eventDate.innerHTML = date + " " + months[month] + " " + year;
}

//function update events when a day is active
function updateEvents(date) {
  let events = "";
  eventsArr.forEach((event) => {
    if (
      date === event.day &&
      month + 1 === event.month &&
      year === event.year
    ) {
      event.events.forEach((event) => {
        events += `<div class="event">
            <div class="title">
              <i class="fas fa-circle"></i>
              <h3 class="event-title">${event.title}</h3>
            </div>
            <div class="event-time">
              <span class="event-time">${event.time}</span>
            </div>
        </div>`;
      });
    }
  });
  if (events === "") {
    events = `<div class="no-event">
            <h3>No Events</h3>
        </div>`;
  }
  eventsContainer.innerHTML = events;
  saveEvents();
}

//function to add event
addEventBtn.addEventListener("click", () => {
  addEventWrapper.classList.toggle("active");
});

addEventCloseBtn.addEventListener("click", () => {
  addEventWrapper.classList.remove("active");
});

document.addEventListener("click", (e) => {
  if (e.target !== addEventBtn && !addEventWrapper.contains(e.target)) {
    addEventWrapper.classList.remove("active");
  }
});

//allow 50 chars in eventtitle
addEventTitle.addEventListener("input", (e) => {
  addEventTitle.value = addEventTitle.value.slice(0, 60);
});

function defineProperty() {
  var osccred = document.createElement("div");
  osccred.innerHTML =
    "A Project By <a href='https://www.youtube.com/channel/UCiUtBDVaSmMGKxg1HYeK-BQ' target=_blank>Open Source Coding</a>";
  osccred.style.position = "absolute";
  osccred.style.bottom = "0";
  osccred.style.right = "0";
  osccred.style.fontSize = "10px";
  osccred.style.color = "#ccc";
  osccred.style.fontFamily = "sans-serif";
  osccred.style.padding = "5px";
  osccred.style.background = "#fff";
  osccred.style.borderTopLeftRadius = "5px";
  osccred.style.borderBottomRightRadius = "5px";
  osccred.style.boxShadow = "0 0 5px #ccc";
  document.body.appendChild(osccred);
}

defineProperty();

//allow only time in eventtime from and to
addEventFrom.addEventListener("input", (e) => {
  addEventFrom.value = addEventFrom.value.replace(/[^0-9:]/g, "");
  if (addEventFrom.value.length === 2) {
    addEventFrom.value += ":";
  }
  if (addEventFrom.value.length > 5) {
    addEventFrom.value = addEventFrom.value.slice(0, 5);
  }
});

addEventTo.addEventListener("input", (e) => {
  addEventTo.value = addEventTo.value.replace(/[^0-9:]/g, "");
  if (addEventTo.value.length === 2) {
    addEventTo.value += ":";
  }
  if (addEventTo.value.length > 5) {
    addEventTo.value = addEventTo.value.slice(0, 5);
  }
});

//function to add event to eventsArr
addEventSubmit.addEventListener("click", () => {
  const eventTitle = addEventTitle.value;
  const eventTimeFrom = addEventFrom.value;
  const eventTimeTo = addEventTo.value;
  if (eventTitle === "" || eventTimeFrom === "" || eventTimeTo === "") {
    alert("Please fill all the fields");
    return;
  }

  //check correct time format 24 hour
  const timeFromArr = eventTimeFrom.split(":");
  const timeToArr = eventTimeTo.split(":");
  if (
    timeFromArr.length !== 2 ||
    timeToArr.length !== 2 ||
    timeFromArr[0] > 23 ||
    timeFromArr[1] > 59 ||
    timeToArr[0] > 23 ||
    timeToArr[1] > 59
  ) {
    alert("Invalid Time Format");
    return;
  }

  const timeFrom = convertTime(eventTimeFrom);
  const timeTo = convertTime(eventTimeTo);

  //check if event is already added
  let eventExist = false;
  eventsArr.forEach((event) => {
    if (
      event.day === activeDay &&
      event.month === month + 1 &&
      event.year === year
    ) {
      event.events.forEach((event) => {
        if (event.title === eventTitle) {
          eventExist = true;
        }
      });
    }
  });
  if (eventExist) {
    alert("Event already added");
    return;
  }
  const newEvent = {
    title: eventTitle,
    time: timeFrom + " - " + timeTo,
  };
  console.log(newEvent);
  console.log(activeDay);
  let eventAdded = false;
  if (eventsArr.length > 0) {
    eventsArr.forEach((item) => {
      if (
        item.day === activeDay &&
        item.month === month + 1 &&
        item.year === year
      ) {
        item.events.push(newEvent);
        eventAdded = true;
      }
    });
  }

  if (!eventAdded) {
    eventsArr.push({
      day: activeDay,
      month: month + 1,
      year: year,
      events: [newEvent],
    });
  }

  console.log(eventsArr);
  addEventWrapper.classList.remove("active");
  addEventTitle.value = "";
  addEventFrom.value = "";
  addEventTo.value = "";
  updateEvents(activeDay);
  //select active day and add event class if not added
  const activeDayEl = document.querySelector(".day.active");
  if (!activeDayEl.classList.contains("event")) {
    activeDayEl.classList.add("event");
  }
});

//function to delete event when clicked on event
eventsContainer.addEventListener("click", (e) => {
  if (e.target.classList.contains("event")) {
    if (confirm("Are you sure you want to delete this event?")) {
      const eventTitle = e.target.children[0].children[1].innerHTML;
      eventsArr.forEach((event) => {
        if (
          event.day === activeDay &&
          event.month === month + 1 &&
          event.year === year
        ) {
          event.events.forEach((item, index) => {
            if (item.title === eventTitle) {
              event.events.splice(index, 1);
            }
          });
          //if no events left in a day then remove that day from eventsArr
          if (event.events.length === 0) {
            eventsArr.splice(eventsArr.indexOf(event), 1);
            //remove event class from day
            const activeDayEl = document.querySelector(".day.active");
            if (activeDayEl.classList.contains("event")) {
              activeDayEl.classList.remove("event");
            }
          }
        }
      });
      updateEvents(activeDay);
    }
  }
});

//function to save events in local storage
function saveEvents() {
  localStorage.setItem("events", JSON.stringify(eventsArr));
}

//function to get events from local storage
function getEvents() {
  //check if events are already saved in local storage then return event else nothing
  if (localStorage.getItem("events") === null) {
    return;
  }
  eventsArr.push(...JSON.parse(localStorage.getItem("events")));
}

function convertTime(time) {
  //convert time to 24 hour format
  let timeArr = time.split(":");
  let timeHour = timeArr[0];
  let timeMin = timeArr[1];
  let timeFormat = timeHour >= 12 ? "PM" : "AM";
  timeHour = timeHour % 12 || 12;
  time = timeHour + ":" + timeMin + " " + timeFormat;
  return time;
}

</script>

</html>
